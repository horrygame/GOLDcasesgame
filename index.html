<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–æ–ª–æ—Ç–∞—è –ª–∏—Ö–æ—Ä–∞–¥–∫–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #2d3881);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .start-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
        }

        .start-screen h1 {
            font-size: 3em;
            margin-bottom: 30px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .tab-buttons {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .tab-btn {
            padding: 15px 30px;
            font-size: 1.2em;
            background: #ffd700;
            color: #000;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .tab-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255,215,0,0.4);
        }

        .game-screen {
            display: none;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0,0,0,0.3);
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .resource {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2em;
        }

        .resource-icon {
            font-size: 1.5em;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ */
        .game-navigation {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .nav-btn {
            padding: 12px 30px;
            font-size: 1.1em;
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid #ffd700;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background: rgba(255,215,0,0.2);
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: #ffd700;
            color: #000;
            box-shadow: 0 0 15px rgba(255,215,0,0.5);
        }

        .production-tab {
            display: none;
        }

        .cases-tab {
            display: none;
        }

        .production-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            height: 70vh;
        }

        .mine-section, .workshop-section {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
        }

        .mine-visual, .workshop-visual {
            width: 200px;
            height: 200px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            margin: 20px 0;
            box-shadow: 0 0 30px rgba(255,215,0,0.5);
        }

        .workshop-visual {
            background: linear-gradient(45deg, #4a00e0, #8e2de2);
            box-shadow: 0 0 30px rgba(74,0,224,0.5);
        }

        .upgrade-controls, .workshop-controls {
            width: 100%;
            text-align: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 1em;
        }

        .btn-gold {
            background: #ffd700;
            color: #000;
        }

        .btn-gold:hover {
            background: #ffed4e;
            transform: translateY(-2px);
        }

        .btn-key {
            background: #4a00e0;
            color: white;
        }

        .btn-key:hover {
            background: #8e2de2;
            transform: translateY(-2px);
        }

        .btn-case {
            background: #ff6b6b;
            color: white;
        }

        .btn-case:hover {
            background: #ff8e8e;
            transform: translateY(-2px);
        }

        .gold-loading {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .gold-loading input {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: rgba(255,255,255,0.9);
            color: #000;
        }

        .progress-container {
            width: 100%;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 20px;
            background: linear-gradient(90deg, #4a00e0, #8e2de2);
            width: 0%;
            transition: width 0.3s;
        }

        .inventory {
            margin-top: 30px;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .item {
            padding: 15px 10px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .common { 
            background: #b8b8b8; 
            color: #000;
        }
        .rare { 
            background: #4fc3f7; 
            color: #000;
        }
        .epic { 
            background: #ba68c8; 
            color: #fff;
        }
        .mythic { 
            background: #ff8a65; 
            color: #fff;
        }
        .impossible { 
            background: linear-gradient(45deg, #ffd700, #ff6b6b);
            color: #000;
        }

        .log {
            margin-top: 20px;
            max-height: 150px;
            overflow-y: auto;
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
        }

        .log-entry {
            margin: 8px 0;
            padding: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            border-left: 3px solid #ffd700;
        }

        .stats {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .stat {
            background: rgba(255,255,255,0.1);
            padding: 10px 15px;
            border-radius: 8px;
            text-align: center;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–ø–∞–¥–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞ */
        .case-opening {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .case-content {
            text-align: center;
            background: linear-gradient(135deg, #2d3881, #1a2a6c);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(255,215,0,0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .reward-item {
            font-size: 5em;
            margin: 20px 0;
            animation: bounce 1s infinite alternate;
        }

        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-20px); }
        }

        .reward-rarity {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }

        .reward-name {
            font-size: 1.5em;
            margin: 10px 0;
        }

        .close-reward {
            margin-top: 20px;
            padding: 10px 20px;
            background: #ffd700;
            color: #000;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .item-new {
            animation: glow 2s ease-in-out;
            box-shadow: 0 0 20px currentColor;
        }

        @keyframes glow {
            0% { 
                transform: scale(1);
                box-shadow: 0 0 5px currentColor;
            }
            50% { 
                transform: scale(1.1);
                box-shadow: 0 0 30px currentColor;
            }
            100% { 
                transform: scale(1);
                box-shadow: 0 0 5px currentColor;
            }
        }
    </style>
</head>
<body>
    <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
    <div class="start-screen" id="startScreen">
        <h1>üèÜ –ó–æ–ª–æ—Ç–∞—è –õ–∏—Ö–æ—Ä–∞–¥–∫–∞</h1>
        <div class="tab-buttons">
            <button class="tab-btn" onclick="startGame('production')">‚õèÔ∏è –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</button>
            <button class="tab-btn" onclick="startGame('cases')">üéÅ –ö–µ–π—Å—ã</button>
        </div>
        <p>–ó–æ–ª–æ—Ç–æ –ø–∞–¥–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É!</p>
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
    <div class="game-screen" id="gameScreen">
        <!-- –®–∞–ø–∫–∞ —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏ -->
        <div class="header">
            <div class="resource">
                <span class="resource-icon">üí∞</span>
                <span id="gold">0</span>
            </div>
            <div class="resource">
                <span class="resource-icon">üîë</span>
                <span id="keys">0</span>
            </div>
            <div class="resource">
                <span class="resource-icon">‚ö°</span>
                <span id="speed">1x</span>
            </div>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ -->
        <div class="game-navigation">
            <button class="nav-btn active" id="navProduction" onclick="switchTab('production')">‚õèÔ∏è –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</button>
            <button class="nav-btn" id="navCases" onclick="switchTab('cases')">üéÅ –ö–µ–π—Å—ã</button>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ -->
        <div class="production-tab" id="productionTab">
            <div class="production-container">
                <!-- –õ–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –∫–ª—é—á–µ–π -->
                <div class="workshop-section">
                    <h2>üîß –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –∫–ª—é—á–µ–π</h2>
                    <div class="workshop-visual">üîë</div>
                    
                    <div class="workshop-controls">
                        <div class="gold-loading">
                            <input type="number" id="goldToLoad" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–æ–ª–æ—Ç–∞" min="100" step="100">
                            <button class="btn btn-key" onclick="loadGold()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∑–æ–ª–æ—Ç–æ</button>
                        </div>
                        
                        <div class="progress-container">
                            <div class="progress-bar" id="workshopProgress"></div>
                        </div>
                        
                        <div class="stats">
                            <div class="stat">
                                <div>–ó–∞–≥—Ä—É–∂–µ–Ω–æ</div>
                                <div id="loadedGold">0</div>
                            </div>
                            <div class="stat">
                                <div>–í –ø—Ä–æ—Ü–µ—Å—Å–µ</div>
                                <div id="inProgress">0 –∫–ª—é—á–µ–π</div>
                            </div>
                        </div>
                        
                        <p style="margin-top: 10px; font-size: 0.9em;">1 –∫–ª—é—á = 100üí∞</p>
                    </div>
                </div>

                <!-- –ü—Ä–∞–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –ó–æ–ª–æ—Ç–∞—è —à–∞—Ö—Ç–∞ -->
                <div class="mine-section">
                    <h2>‚õèÔ∏è –ó–æ–ª–æ—Ç–∞—è —à–∞—Ö—Ç–∞</h2>
                    <div class="mine-visual">üí∞</div>
                    
                    <div class="upgrade-controls">
                        <button class="btn btn-gold" onclick="buyUpgrade()">
                            –£—Å–∫–æ—Ä–∏—Ç—å —à–∞—Ö—Ç—É (<span id="upgradeCost">10</span>üí∞)
                        </button>
                        
                        <div class="stats">
                            <div class="stat">
                                <div>–¢–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å</div>
                                <div id="currentSpeed">1 –∑–æ–ª–æ—Ç–æ/—Å–µ–∫</div>
                            </div>
                            <div class="stat">
                                <div>–°–ª–µ–¥—É—é—â–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ</div>
                                <div id="nextSpeed">+0.5 –∑–æ–ª–æ—Ç–∞</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –∫–µ–π—Å–æ–≤ -->
        <div class="cases-tab" id="casesTab">
            <div style="text-align: center; margin-bottom: 30px;">
                <button class="btn btn-case" onclick="openCase()" id="openCaseBtn" disabled>
                    –û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å (1üîë)
                </button>
            </div>

            <div class="inventory">
                <h3>üéí –í–∞—à–∏ –ø—Ä–µ–¥–º–µ—Ç—ã</h3>
                <div class="items-grid" id="itemsGrid">
                    <!-- –ü—Ä–µ–¥–º–µ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                </div>
            </div>
        </div>

        <!-- –ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π -->
        <div class="log">
            <h3>üìú –ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π</h3>
            <div id="logEntries"></div>
        </div>
    </div>

    <!-- –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞ -->
    <div class="case-opening" id="caseOpening">
        <div class="case-content">
            <h2>üéÅ –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–∞</h2>
            <div class="reward-item" id="rewardIcon">‚ùì</div>
            <div class="reward-rarity" id="rewardRarity">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="reward-name" id="rewardName">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã...</div>
            <button class="close-reward" onclick="closeReward()">–ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É</button>
        </div>
    </div>

    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let gold = 0;
        let keys = 0;
        let speed = 1;
        let upgradeCost = 10;
        let upgradeLevel = 1;
        let loadedGold = 0;
        let keysInProgress = 0;
        let isWorkshopActive = false;
        let currentTab = 'production';
        
        // –®–∞–Ω—Å—ã –≤—ã–ø–∞–¥–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤
        const rarityChances = {
            common: 50,
            rare: 30,
            epic: 12,
            mythic: 6,
            impossible: 2
        };
        
        // –ù–∞–∑–≤–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ø–æ —Ä–µ–¥–∫–æ—Å—Ç—è–º
        const rarityNames = {
            common: '–û–±—ã—á–Ω—ã–π',
            rare: '–†–µ–¥–∫–∏–π', 
            epic: '–≠–ø–∏—á–µ—Å–∫–∏–π',
            mythic: '–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π',
            impossible: '–ù–µ–≤–æ–∑–º–æ–∂–Ω—ã–π'
        };

        // –ò–∫–æ–Ω–∫–∏ –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–¥–∫–æ—Å—Ç–µ–π
        const rarityIcons = {
            common: '‚ö™',
            rare: 'üîµ', 
            epic: 'üü£',
            mythic: 'üü†',
            impossible: 'üåà'
        };

        // –ù–∞–∑–≤–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏
        const itemNames = {
            common: ['–ö–∞–º–µ–Ω–Ω—ã–π –º–µ—á', '–ö–æ–∂–∞–Ω—ã–π –¥–æ—Å–ø–µ—Ö', '–î–µ—Ä–µ–≤—è–Ω–Ω—ã–π —â–∏—Ç', '–ü—Ä–æ—Å—Ç–æ–π –ø–æ—Å–æ—Ö'],
            rare: ['–°—Ç–∞–ª—å–Ω–æ–π –º–µ—á', '–ö–æ–ª—å—á—É–∂–Ω—ã–π –¥–æ—Å–ø–µ—Ö', '–°—Ç–∞–ª—å–Ω–æ–π —â–∏—Ç', '–ú–∞–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Å–æ—Ö'],
            epic: ['–ú–∏—Ñ—Ä–∏–ª–æ–≤—ã–π –º–µ—á', '–ü–ª–∞—Å—Ç–∏–Ω—á–∞—Ç—ã–π –¥–æ—Å–ø–µ—Ö', '–ú–∏—Ñ—Ä–∏–ª–æ–≤—ã–π —â–∏—Ç', '–î—Ä–µ–≤–Ω–∏–π –ø–æ—Å–æ—Ö'],
            mythic: ['–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∫–ª–∏–Ω–æ–∫', '–î—Ä–∞–∫–æ–Ω–∏–π –¥–æ—Å–ø–µ—Ö', '–©–∏—Ç –≥–µ—Ä–æ—è', '–ü–æ—Å–æ—Ö –∞—Ä—Ö–∏–º–∞–≥–∞'],
            impossible: ['–û—Ä—É–∂–∏–µ –±–æ–≥–æ–≤', '–ë—Ä–æ–Ω—è —Ç–∏—Ç–∞–Ω–∞', '–©–∏—Ç —Å—É–¥—å–±—ã', '–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –≤—Å–µ–ª–µ–Ω–Ω–æ–π']
        };

        // –ù–∞—á–∞—Ç—å –∏–≥—Ä—É –∏ –ø–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
        function startGame(tabName) {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            switchTab(tabName);
            addLogEntry('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!', '#4fc3f7');
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
        function switchTab(tabName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.getElementById('productionTab').style.display = 'none';
            document.getElementById('casesTab').style.display = 'none';
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.getElementById('navProduction').classList.remove('active');
            document.getElementById('navCases').classList.remove('active');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            if (tabName === 'production') {
                document.getElementById('productionTab').style.display = 'block';
                document.getElementById('navProduction').classList.add('active');
                currentTab = 'production';
            } else if (tabName === 'cases') {
                document.getElementById('casesTab').style.display = 'block';
                document.getElementById('navCases').classList.add('active');
                currentTab = 'cases';
            }
            
            updateUI();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            document.getElementById('gold').textContent = gold;
            document.getElementById('keys').textContent = keys;
            document.getElementById('speed').textContent = speed + 'x';
            document.getElementById('upgradeCost').textContent = upgradeCost;
            document.getElementById('loadedGold').textContent = loadedGold;
            document.getElementById('inProgress').textContent = keysInProgress + ' –∫–ª—é—á–µ–π';
            document.getElementById('currentSpeed').textContent = speed + ' –∑–æ–ª–æ—Ç–æ/—Å–µ–∫';
            document.getElementById('nextSpeed').textContent = '+0.5 –∑–æ–ª–æ—Ç–∞';
            document.getElementById('openCaseBtn').disabled = keys === 0;
        }

        // –ü–∞—Å—Å–∏–≤–Ω—ã–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫ –∑–æ–ª–æ—Ç–∞ - –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É!
        setInterval(() => {
            gold += speed;
            updateUI();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ–º –∫–ª—é—á–∏, –µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –∑–æ–ª–æ—Ç–æ
            processWorkshop();
        }, 1000); // 1000 –º—Å = 1 —Å–µ–∫—É–Ω–¥–∞

        // –£–ª—É—á—à–µ–Ω–∏–µ —à–∞—Ö—Ç—ã —Å –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏
        function buyUpgrade() {
            if (gold >= upgradeCost) {
                gold -= upgradeCost;
                speed += 0.5; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –Ω–∞ 0.5 –∑–æ–ª–æ—Ç–∞ –≤ —Å–µ–∫—É–Ω–¥—É
                upgradeLevel++;
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä—É—é —Å–∏—Å—Ç–µ–º—É —Ü–µ–Ω: 10, 15, 22, 33, 49, 73...
                upgradeCost = Math.floor(upgradeCost * 1.5);
                
                updateUI();
                addLogEntry('‚ö° –°–∫–æ—Ä–æ—Å—Ç—å —à–∞—Ö—Ç—ã —É–≤–µ–ª–∏—á–µ–Ω–∞!', '#4caf50');
            } else {
                addLogEntry('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è!', '#f44336');
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–æ–ª–æ—Ç–∞ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫—É—é
        function loadGold() {
            const goldInput = document.getElementById('goldToLoad');
            const amount = parseInt(goldInput.value);
            
            if (isNaN(amount) || amount < 100) {
                addLogEntry('‚ùå –í–≤–µ–¥–∏—Ç–µ –º–∏–Ω–∏–º—É–º 100 –∑–æ–ª–æ—Ç–∞!', '#f44336');
                return;
            }
            
            if (gold < amount) {
                addLogEntry('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞!', '#f44336');
                return;
            }
            
            gold -= amount;
            loadedGold += amount;
            goldInput.value = '';
            updateUI();
            addLogEntry(`üîß –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${amount} –∑–æ–ª–æ—Ç–∞ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫—É—é`, '#8e2de2');
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É, –µ—Å–ª–∏ –º–∞—Å—Ç–µ—Ä—Å–∫–∞—è –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞
            if (!isWorkshopActive) {
                processWorkshop();
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–µ–π –≤ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π
        function processWorkshop() {
            if (loadedGold >= 100 && !isWorkshopActive) {
                isWorkshopActive = true;
                createKey();
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∫–ª—é—á–∞
        function createKey() {
            if (loadedGold < 100) {
                isWorkshopActive = false;
                return;
            }
            
            loadedGold -= 100;
            keysInProgress++;
            updateUI();
            
            const progressBar = document.getElementById('workshopProgress');
            let progress = 0;
            
            const interval = setInterval(() => {
                progress += 2;
                progressBar.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    keys++;
                    keysInProgress--;
                    updateUI();
                    addLogEntry('üîë –ö–ª—é—á —Å–æ–∑–¥–∞–Ω!', '#4a00e0');
                    
                    // –°–æ–∑–¥–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –∫–ª—é—á, –µ—Å–ª–∏ –µ—Å—Ç—å –∑–æ–ª–æ—Ç–æ
                    setTimeout(() => {
                        processWorkshop();
                    }, 100);
                }
            }, 100);
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
        function openCase() {
            if (keys > 0) {
                keys--;
                updateUI();
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞
                const openCaseBtn = document.getElementById('openCaseBtn');
                openCaseBtn.textContent = '–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è...';
                openCaseBtn.disabled = true;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—ã–ø–∞–≤—à–∏–π –ø—Ä–µ–¥–º–µ—Ç
                const random = Math.random() * 100;
                let accumulated = 0;
                let selectedRarity;
                
                for (const [rarity, chance] of Object.entries(rarityChances)) {
                    accumulated += chance;
                    if (random <= accumulated) {
                        selectedRarity = rarity;
                        break;
                    }
                }
                
                // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤—ã–ø–∞–≤—à–µ–π —Ä–µ–¥–∫–æ—Å—Ç–∏
                const items = itemNames[selectedRarity];
                const selectedItem = items[Math.floor(Math.random() * items.length)];
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –≤—ã–ø–∞–¥–µ–Ω–∏—è
                setTimeout(() => {
                    showRewardAnimation(selectedRarity, selectedItem);
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ–¥–º–µ—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
                    setTimeout(() => {
                        addItemToInventory(selectedRarity, selectedItem);
                    }, 500);
                    
                    openCaseBtn.textContent = '–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å (1üîë)';
                    openCaseBtn.disabled = keys === 0;
                }, 1000);
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –Ω–∞–≥—Ä–∞–¥—ã
        function showRewardAnimation(rarity, itemName) {
            const caseOpening = document.getElementById('caseOpening');
            const rewardIcon = document.getElementById('rewardIcon');
            const rewardRarity = document.getElementById('rewardRarity');
            const rewardName = document.getElementById('rewardName');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ –Ω–∞–≥—Ä–∞–¥–µ
            rewardIcon.textContent = rarityIcons[rarity];
            rewardRarity.textContent = rarityNames[rarity];
            rewardRarity.className = `reward-rarity ${rarity}`;
            rewardName.textContent = itemName;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
            caseOpening.style.display = 'flex';
        }

        // –ó–∞–∫—Ä—ã—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –Ω–∞–≥—Ä–∞–¥—ã
        function closeReward() {
            document.getElementById('caseOpening').style.display = 'none';
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
        function addItemToInventory(rarity, itemName) {
            const itemsGrid = document.getElementById('itemsGrid');
            const item = document.createElement('div');
            item.className = `item ${rarity} item-new`;
            item.innerHTML = `${rarityIcons[rarity]}<br>${itemName}`;
            item.title = `${rarityNames[rarity]}: ${itemName}`;
            itemsGrid.appendChild(item);
            
            // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –∞–Ω–∏–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                item.classList.remove('item-new');
            }, 2000);
            
            addLogEntry(
                `üéÅ –í—ã –ø–æ–ª—É—á–∏–ª–∏: <span class="${rarity}">${rarityNames[rarity]} ${itemName}</span>`, 
                '#4caf50'
            );
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –∂—É—Ä–Ω–∞–ª
        function addLogEntry(message, color) {
            const logEntries = document.getElementById('logEntries');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
            entry.style.borderLeftColor = color;
            logEntries.appendChild(entry);
            logEntries.scrollTop = logEntries.scrollHeight;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updateUI();
    </script>
</body>
</html>
